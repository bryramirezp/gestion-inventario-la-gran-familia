<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestión de Inventario - La Gran Familia</title>

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()" />

    <!-- Content Security Policy - Backup para desarrollo -->
    <!-- Los headers principales se configuran en vercel.json para producción -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://*.supabase.co wss://*.supabase.co; frame-src 'none'; object-src 'none';" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Lazy load non-critical scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js" defer></script>
    <style>
      :root {
        --background: 210 20% 98%;
        --foreground: 215 25% 27%;

        --card: 0 0% 100%;
        --card-foreground: 215 25% 27%;
        --card-hover: 210 15% 96%;

        --primary: 31 72% 56%;
        --primary-foreground: 0 0% 98%;
        --primary-hover: 31 72% 50%;
        --primary-light: 31 72% 92%;

        --secondary: 215 15% 92%;
        --secondary-foreground: 215 25% 27%;

        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 98%;

        --success: 142 76% 36%;
        --success-foreground: 0 0% 98%;

        --warning: 38 92% 50%;
        --warning-foreground: 215 25% 27%;

        --muted: 215 20% 96%;
        --muted-foreground: 215 16% 46%;

        --accent: 31 72% 96%;
        --accent-foreground: 31 72% 20%;

        --border: 215 20% 88%;
        --input: 215 20% 92%;
        --ring: 31 72% 56%;

        --inventory-high: 142 76% 36%;
        --inventory-medium: 38 92% 50%;
        --inventory-low: 0 84% 60%;
        --inventory-expired: 0 72% 35%;

        --hero-gradient-start: 215 20% 96%; /* muted */
        --hero-gradient-end: 210 20% 98%; /* background */
      }

      .dark {
        --background: 222 47% 11%;
        --foreground: 210 40% 98%;

        --card: 222 47% 14%;
        --card-foreground: 210 40% 98%;
        --card-hover: 222 47% 18%;

        --primary: 31 72% 56%;
        --primary-foreground: 0 0% 98%;
        --primary-hover: 31 72% 62%;
        --primary-light: 31 72% 92% / 0.1;

        --secondary: 215 28% 22%;
        --secondary-foreground: 210 40% 98%;

        --destructive: 0 63% 31%;
        --destructive-foreground: 210 40% 98%;

        --success: 142 76% 36%;
        --success-foreground: 0 0% 98%;

        --warning: 38 92% 50%;
        --warning-foreground: 215 25% 27%;

        --muted: 215 28% 18%;
        --muted-foreground: 215 20% 65%;

        --accent: 31 72% 96% / 0.1;
        --accent-foreground: 31 72% 80%;

        --border: 215 28% 18%;
        --input: 215 28% 22%;
        --ring: 31 72% 56%;

        --dark-input: 215 28% 22%;
        --dark-muted-foreground: 215 20% 65%;
        --dark-ring: 31 72% 56%;
        --dark-foreground: 210 40% 98%;
        --dark-background: 222 47% 11%;
        --dark-border: 215 28% 18%;
        --dark-card: 222 47% 14%;
        --dark-muted: 215 28% 18%;
        --dark-accent: 31 72% 96% / 0.1;
        --dark-accent-foreground: 31 72% 80%;

        --hero-gradient-start: 222 47% 14%; /* dark-card */
        --hero-gradient-end: 222 47% 11%; /* dark-background */
      }
      html {
        scroll-behavior: smooth;
      }
    </style>
  </head>
  <body class="bg-background text-foreground transition-colors duration-300">
    <script>
      // Prevents flash of wrong theme
      (function () {
        const theme = localStorage.getItem('inventory-theme');
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
